%!TEX program = xelatex
\documentclass[landscape, 12pt,a4paper]{report}
\usepackage[landscape]{geometry}
\linespread{0}
\usepackage[english, russian]{babel}

\usepackage{tikz}
\usepackage{geometry}
\usepackage{pdfcomment}
\usepackage{textcomp}

\usepackage{stackengine,marvosym,xcolor,trimclip}


\geometry{left=0cm,right=0cm,top=0cm,bottom=0cm,bindingoffset=0cm}

\usetikzlibrary{arrows}
\usetikzlibrary{shapes,snakes}
\usetikzlibrary{automata,positioning}
\usepackage{fontspec}
\linespread{0}
\usetikzlibrary{decorations.text}
\pagestyle{empty}
\setmainfont{cmunrm.ttf}[
BoldFont = cmunbx.ttf ,
ItalicFont = cmunti.ttf ,
BoldItalicFont = cmunbi.ttf ]
\setmonofont{gothic.ttf}

\newcommand\rrelationship  [1]{[thick, postaction={decorate,decoration={text along path, text align=center, raise={+1ex}, reverse path, text={|\small|#1} }}]}
\newcommand\relationship  [1]{[thick, postaction={decorate,decoration={text along path, text align=center, raise={+1ex}, text={|\small|#1} }}]}

\newcommand{\vampire}{\textdagger}
\newcommand{\men}{\Gentsroom}
\newcommand{\women}{\Ladiesroom}
\newcommand{\gule}{$\Xi$}
\begin{document}
\newpage
 \begin{centering}
% ~ \newline
\section*{Хроники полумесяца. Карта отношений}
\begin{tikzpicture}[>=stealth',shorten >=1pt,auto,node distance=3cm,
                    thick,
                    main node/.style={circle,draw,font=\sffamily\Large\bfseries}]
  \tikzstyle{every  node}=[draw,align=center] 
  %begin{Игровые персонажи}
    \node[rectangle] (Alan)  at (-25,-7) { Алан \vampire \\ \tiny Бруха \\ \tiny частный детектив};
    \node[rectangle] (Kyle)  { Кайл \vampire \\ \tiny Тремер, \\ \tiny доктор};
    \node[rectangle] (Daren) at (-6,0) {Дарен \vampire \\ \tiny Тремер \\ \tiny безопасник};
    \node[rectangle] (Margaret) at (-15,-5) {Маргарет \vampire };
    \node[rectangle] (Joseph) at (-15,0) {Джозеф \vampire \\ \tiny Тореадор \\ \tiny музейный сторож};
    \node[rectangle] (Brut)  at (-20,-7) {Брут \vampire \\\tiny Гангрел \\ \tiny лесник};
    \node[rectangle] (June) at  (-15,-11) {Джун \vampire\\\tiny Бруха  \\ \tiny бармен, наркоторговец};
  %end{Игровые персонажи}

  %\begin{Неигровые персонажи}
    \node[ellipse] (Avessolom) [node distance = 8cm,below left  = of Daren] {Авессолом \vampire \\\tiny древний колдун};
    \node[ellipse] (Adam) [node distance = 1cm,right  = of Avessolom] {Адам Роупс \vampire \\\tiny собака-сутулая};
    \node[ellipse] (Drake) [node distance = 2cm,below right  = of Alan] {Дрейк \vampire \\\tiny Бруха-анарх};
    \node[ellipse] (Samanta) [above  = of Joseph] {Саманта \women \\\tiny шеф-повар};
    \node[ellipse] (Jordan) [above = of Kyle] {Джордан \Gentsroom \\\tiny главврач};
    \node[ellipse] (Sophie) [below = of Kyle] {Софи \vampire \\Паркс};
    \node[ellipse] (Charlie) [node distance=1cm,below = of Sophie] {Чарли \vampire \\Саливан\\\tiny<<Берд>>};    
    \node[ellipse] (James K) [above = of Daren] {Джэймс \men \\Каннивал};
    \node[ellipse] (James S) [node distance=1cm,above right = of James K] {Джэймс \men \\Салливан};
    \node[ellipse] (Kaitley) [below = of Daren]{Кейтли  \vampire \\Найт};
    \node[ellipse] (Henry) [node distance=0.5cm,below  left = of Samanta]{Генри \vampire \\\tiny глава тетра\\};
    \node[ellipse] (Ray) [left = of Joseph] {Рэй \vampire \\\tiny{местный Джон Уик}};
    \node[ellipse] (Kris) [node distance = 1cm,above left= of Ray] {Крис \vampire};
    \node[ellipse] (Clare) [left of=Henry] {Клэр \vampire};
    \node[ellipse] (Enrica Moretti) [below left of=Kris,node distance=3cm] {Энрика \vampire \\Моретти};
    \node[ellipse] (Olivia) [node distance = 2cm,above right = of Joseph] {Оливия \women\\ \tiny композитор, бармен};
    \node[ellipse] (Oliver) [above left = of Daren,node distance = 1.4cm,above  = of Olivia] {Оливер \men \\Стоун};
  %\end{Неигровые персонажи}

  %\begin{Опоры и сиры}
    \draw\relationship {сир}   [<-]   (Kyle)  to [bend left]     (Sophie);
    \draw\rrelationship {мертва?}   [->]   (Kyle)  to [bend left]     (Sophie);
    \draw\relationship {опора} [->]   (Kyle)  to [bend left]    (Jordan);
    \draw\rrelationship{болезнь Шери} [<-]   (Kyle)  to [bend left]    (Jordan);


    \draw\relationship {сир}   [<-]   (Daren) to [bend left]  (Kaitley);
    \draw\relationship {опора} [->]   (Daren) to [bend right] (James K);  
    \draw\relationship {опора} [->]   (Daren) to [bend right]  (Oliver);

    \draw\rrelationship{сир}   [<-]  (Joseph) to [right]        (Henry);
    \draw\relationship {опора} [->]  (Joseph) to [bend right]     (Samanta);
    \draw\rrelationship {сбежавший отец} [<-]  (Joseph) to [bend right]     (Samanta);
  %\end{Опоры и сиры}

  %begin{Отношения Алана}
    \draw\relationship {}   [<->]   (Alan)  to [bend right]     (Drake);
  %end{Отношения Алана}

  %begin{Отношения Брута}
    \draw\relationship {знакомы по банде}   [<->]   (Brut.east)  to [bend right]     (Adam);
    \draw\relationship {книги?}   [<->]   (Brut)  to [bend left]     (Avessolom.west);
  %end{Отношения Брута}

  %begin{Отношения Брута}
    \draw\rrelationship {знакомы?}   [<->]   (June)  to [bend left]     (Drake);
  %end{Отношения Брута}

  %begin{Отношения Кайла}
    \draw\relationship {информатор}   [<->]   (Kyle.east)  to [bend left=50]     (Charlie);
  %end{Отношения Кайла}


  %begin{Отношения Дарена}
    \draw\relationship{бывший коллега}[->](Oliver) to [bend left]  (Daren);
    \draw\relationship{поставщик крови}[->] (Daren) to [bend right] (James S);
    \draw\relationship{}[->] (Daren) to [bend right] (Avessolom);
    \draw\relationship{ подозрительный новенький}[->] (Daren) to [left] (Adam);
  %end{Отношения Дарена}

  %begin{Отношения Джозефа}
    \draw\rrelationship{ходит в бар}[->] (Joseph) to [bend right](Olivia);
    \draw\rrelationship{}[<->] (Joseph) to [left](Kris);
    \draw\rrelationship{спас из оцепенения}[->] (Joseph.west) to [bend left](Ray);
    \draw\relationship{презирает}[<-] (Joseph) to [bend right](Olivia);
    \draw\rrelationship{бывшие коллеги}[<->] (Joseph) to [right](Clare);
  %end{Отношения Джозефа}


  % \node[ellipse] (Stemford) [above = of Clare]{
  %     Стемфорд\\\scriptsize театр. критик};

  % \draw\relationship{сир}[<-] (Clare) to [bend left] (Stemford);



  % \draw\rrelationship{оппоненты}[<->] (Henry) to [left] (Stemford);
  % \input{detective}


  %begin{Отношения в котерии}
    \draw\relationship{покупатель}[<-] (June) to [bend right] (Kyle);
    \draw\relationship{связные}[<->] (Daren) to [bend right] (Kyle);
    \draw\relationship{знакомы по элизиуму}[<->] (Joseph) to [bend right] (Margaret);
    \draw\relationship{знакомы по элизиуму}[<->] (Enrica Moretti) to [bend right] (Margaret);
    \draw\relationship{информатор}[->] (Margaret) to [bend right] (Daren);
    % \draw\rrelationship{связные}[<->] (Joseph) to [bend right] (Brut);
    \draw\relationship{ходит в бар}[->] (Brut) to (June);
  %end{Отношения в котерии}

  %begin{Отношения неигровых персонажей}
    \draw\rrelationship{клиент}[->] (Oliver) to (Olivia);
    \draw\rrelationship{}[<->] (Kris) to [bend right] (Ray);
    \draw\rrelationship{встречались на показах}[<->] (Clare) to [bend right=70] (Enrica Moretti);
  %end{Отношения неигровых персонажей}

 \node[draw,align=left] at (-2,-12) 
{\textbf{Законы хроники }:\\
  1. Не лезь в чужой монастырь.\\
  2. Долг превыше всего. \\
  3. Любая жестокость должна быть оправдана. \\
  4. Цени тех, кто тебя окружает.};

 \node[draw,align=left] at (-25,-12) 
{\textbf{Легенда}:\\
  \men/\women -- смертный \\
  \vampire -- сородич \\
  \gule -- гуль};



\end{tikzpicture}

\end{centering}


% \begin{tikzpicture}
% \node[draw,align=left] at (0,0) 
% {\textbf{Законы хроники}:\\
%   1. Не лезь в чужой монастырь.\\
%   2. Долг превыше всего. \\
%   3. Любая жестокость должна быть оправдана. \\
%   4. Цени тех, кто тебя окружает.};
% \end{tikzpicture}


\end{document}